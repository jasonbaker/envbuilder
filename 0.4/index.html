

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>envbuilder &mdash; envbuilder v0.4 documentation</title>
    <link rel="stylesheet" href="static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="envbuilder v0.4 documentation" href="#" />
    <link rel="next" title="Command-line Reference" href="command-line.html" /> 
  </head>
  <body>
    <div class="header-wrapper">
      <div class="header">
        <h1><a href="#">envbuilder v0.4 documentation</a></h1>
        <div class="rel">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a> |
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="command-line.html" title="Command-line Reference"
             accesskey="N">next</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="envbuilder">
<h1><a class="toc-backref" href="#id2">envbuilder</a><a class="headerlink" href="#envbuilder" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#envbuilder" id="id2">envbuilder</a><ul>
<li><a class="reference internal" href="#about" id="id3">About</a></li>
<li><a class="reference internal" href="#installing" id="id4">Installing</a></li>
<li><a class="reference internal" href="#the-env-file" id="id5">The .env file</a><ul>
<li><a class="reference internal" href="#the-sections" id="id6">The sections</a></li>
<li><a class="reference internal" href="#string-interpolation" id="id7">String Interpolation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#custom-commands" id="id8">Custom Commands</a></li>
<li><a class="reference internal" href="#the-envb-standard-library" id="id9">The envb standard library</a></li>
<li><a class="reference internal" href="#questions" id="id10">Questions</a></li>
<li><a class="reference internal" href="#support" id="id11">Support</a></li>
</ul>
</li>
<li><a class="reference internal" href="#reference-and-developer-documentation" id="id12">Reference and Developer documentation</a></li>
<li><a class="reference internal" href="#indices-and-tables" id="id13">Indices and tables</a></li>
</ul>
</div>
<div class="section" id="about">
<h2><a class="toc-backref" href="#id3">About</a><a class="headerlink" href="#about" title="Permalink to this headline">¶</a></h2>
<p>Envbuilder is a system for automatically building virtualenvs in Python.
To do this, it uses a .env config file to define <em>parcels</em>, which are
individual pieces of software to be checked out and installed into
the virtualenv.</p>
<p>It is mainly tested under Linux, but it should work under any platform that
supports unix-y commands (including cygwin).  In fact, you might even be
able to make one config file work on both Windows and *nix if you&#8217;re
careful.</p>
<p>Envbuilder has a few goals:</p>
<blockquote>
<ul class="simple">
<li><strong>Transparency</strong> - You should understand what your build is doing and
how it works.</li>
<li><strong>Developer-friendly</strong> - Although envbuilder is perfectly fine for production
deployment, it is primarily intended to make work environments for developers.</li>
<li><strong>Dynamic</strong> - Envbuilder should be able to work with a variety of technologies,
languages, and frameworks.  Developers shouldn&#8217;t be limited to a narrowly defined
set of technologies.  And neither should their tools!</li>
<li><strong>VCS-neutral</strong> - Envbuilder will work with your shiny new DVCS out of the box.
In fact, it will work with any VCS that has a command-line interface.  Use it
with hg, git, bzr, SVN, or CVS (if you&#8217;re a masochist).</li>
</ul>
</blockquote>
</div>
<div class="section" id="installing">
<h2><a class="toc-backref" href="#id4">Installing</a><a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>To install envbuilder, you have two options:  installing from git or installing
from pypi.  If you would like to install via git, use the following set of
commands:</p>
<div class="highlight-python"><pre>git clone git://github.com/jasonbaker/envbuilder.git
cd envbuilder
python setup.py install
# if you plan on making changes to envbuilder, use this command:
python setup.py develop</pre>
</div>
<p>Alternatively, you can download the current <a class="reference external" href="http://github.com/jasonbaker/envbuilder/tarball/master#egg=envbuilder-dev">tarball from master</a>.</p>
<p>If you would like to install from pypi, you should use <a class="reference external" href="http://pypi.python.org/pypi/pip/0.6.1">pip</a>:</p>
<div class="highlight-python"><pre>pip install envbuilder</pre>
</div>
</div>
<div class="section" id="the-env-file">
<h2><a class="toc-backref" href="#id5">The .env file</a><a class="headerlink" href="#the-env-file" title="Permalink to this headline">¶</a></h2>
<p>The .env&#8217;s file format is similar to the .ini file format, but there are
some major differences.  The best way to illustrate this is with an example.
The following will make a virtualenv with envbuilder installed.  There&#8217;s
probably not any good reason to do this other than to provide an easy
example for the README:</p>
<div class="highlight-python"><pre>[project]
parcels = 'envbuilder', # Note the comma

    [[DEFAULT]]
    git_checkout = 'git clone $url'
    python = '$CWD/bin/python'

    [[envbuilder]]
    dir = 'envbuilder'
    url = 'git://github.com/jasonbaker/envbuilder.git'
    setup = '$python setup.py develop'
    checkout = '$git_checkout'</pre>
</div>
<div class="section" id="the-sections">
<h3><a class="toc-backref" href="#id6">The sections</a><a class="headerlink" href="#the-sections" title="Permalink to this headline">¶</a></h3>
<div class="section" id="project">
<h4>project<a class="headerlink" href="#project" title="Permalink to this headline">¶</a></h4>
<p>This section is the top-level section.  It has two possible options:</p>
<ul class="simple">
<li><strong>parcels</strong> - These are the parcels to be installed in the order they are
to be installed.  This is a list delimited by commas.</li>
<li><strong>requires</strong> - This is a list of packages that will be easy_installed into
the virtualenv when setup is run.  If the -U flag is passed in to setup,
these will be upgraded.</li>
</ul>
</div>
<div class="section" id="default">
<h4>DEFAULT<a class="headerlink" href="#default" title="Permalink to this headline">¶</a></h4>
<p>In this particular example, this particular section is probably
not very meaningful.  However, when using multiple parcels, it is useful to
define default values to be used in each section.  Note that these values
are currently only used in string interpolation.  There is no &#8220;inheritance&#8221;
concept.</p>
</div>
<div class="section" id="id1">
<h4>envbuilder<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>Here&#8217;s where we actually define a parcel.  There are
currently only two options that need to be defined: setup and checkout.</p>
<p>These are the shell commands that are run when you use <tt class="docutils literal"><span class="pre">envb</span>
<span class="pre">setup</span></tt> and <tt class="docutils literal"><span class="pre">envb</span> <span class="pre">checkout</span></tt> (respectively).</p>
</div>
</div>
<div class="section" id="string-interpolation">
<h3><a class="toc-backref" href="#id7">String Interpolation</a><a class="headerlink" href="#string-interpolation" title="Permalink to this headline">¶</a></h3>
<p>You&#8217;ll notice that in this example, we use something called
<em>string interpolation</em>.  Every part that begins with a $ is defined
elsewhere.  The order that it uses to check is the following:</p>
<blockquote>
<ol class="arabic simple">
<li>The current section.</li>
<li>The DEFAULT subsection of the project section.</li>
<li>The project section.</li>
<li>The system&#8217;s environment variables</li>
</ol>
</blockquote>
<p>To run this, copy the .env file to where you want to build the project and
run the following commands (the output only shows the shell commands, but the
output is left out for brevity&#8217;s sake):</p>
<div class="highlight-python"><pre>envb co
--&gt; git clone git://github.com/jasonbaker/envbuilder.git

envb setup
--&gt; virtualenv --no-site-packages .
--&gt; /home/jason/src/envbuilder-src/bin/python setup.py develop
(From: /home/jason/src/envbuilder-src/envbuilder)</pre>
</div>
<p>As you can see, the setup command is executed from within the checked out
envbuilder directory (which is why the $CWD variable is required).  You can
also see that the checkout command was translated in the following steps:</p>
<blockquote>
<ol class="arabic simple">
<li>$git_checkout</li>
<li>git clone $url</li>
<li>git clone git://github.com/jasonbaker/envbuilder.git</li>
</ol>
</blockquote>
</div>
</div>
<div class="section" id="custom-commands">
<h2><a class="toc-backref" href="#id8">Custom Commands</a><a class="headerlink" href="#custom-commands" title="Permalink to this headline">¶</a></h2>
<p>Now let&#8217;s add a custom command to this.  Suppose we want to write a command
that can give us the current status of our checked-out git repository.  The
finished .env file will look like this:</p>
<div class="highlight-python"><pre>[project]
parcels = 'envbuilder', # Note the comma

    [[DEFAULT]]
    git_checkout = 'git clone $url'
    python = '$CWD/bin/python'

    [[envbuilder]]
    dir = 'envbuilder'
    url = 'git://github.com/jasonbaker/envbuilder.git'
    setup = '$python setup.py develop'
    checkout = '$git_checkout'

[commands]
    [[ status ]]
    required = True
    default = 'git status'
    working_dir = '%dir'
    help = 'Check the status of all checked-out parcels'</pre>
</div>
<p>This works much like envbuilder&#8217;s built in commands.  Each parcel can
override the default behavior by adding an option with the same name
as the command.  For instance, suppose we wanted to keep <tt class="docutils literal"><span class="pre">git</span> <span class="pre">status</span></tt>
as the default behavior, but we wanted to make envbuilder&#8217;s output use
the verbose flag.  We could change the above to this:</p>
<div class="highlight-python"><pre>[project]
parcels = 'envbuilder', # Note the comma

    [[DEFAULT]]
    git_checkout = 'git clone $url'
    python = '$CWD/bin/python'

    [[envbuilder]]
    dir = 'envbuilder'
    url = 'git://github.com/jasonbaker/envbuilder.git'
    setup = '$python setup.py develop'
    checkout = '$git_checkout'
    update = 'git status -v'

[commands]
    [[ status ]]
    required = True
    default = 'git status'
    working_dir = '%dir'
    help = 'Check the status of all checked-out parcels'</pre>
</div>
<p>A command has the following options:</p>
<blockquote>
<ul class="simple">
<li><strong>required</strong> - If this is True and no default is set, an error will
be raised if a parcel has not defined its own way to run this command</li>
<li><strong>default</strong> - If a parcel does not have its own way of running this
command, use this instead.</li>
<li><strong>working_dir</strong> - The directory to run this within.</li>
<li><strong>help</strong> - The help text that will be given when <tt class="docutils literal"><span class="pre">envb</span> <span class="pre">-h</span></tt> is
run.</li>
</ul>
</blockquote>
<p>Note that you may also access a parcel&#8217;s options by prefixing the name with
a <tt class="docutils literal"><span class="pre">%</span></tt> instead of a <tt class="docutils literal"><span class="pre">$</span></tt>.  In the above example, <tt class="docutils literal"><span class="pre">%dir</span></tt> is replaced
with the dir option of the parcel.  One thing to note is that percent variables
don&#8217;t use the normal interpolation path.  Thus, the percent variable must be
defined within the parcel itself, not the DEFAULT section.</p>
</div>
<div class="section" id="the-envb-standard-library">
<h2><a class="toc-backref" href="#id9">The envb standard library</a><a class="headerlink" href="#the-envb-standard-library" title="Permalink to this headline">¶</a></h2>
<p>You may notice messages like the following:  &#8220;WARNING:  unable to find builtin commands&#8221;.
This is because envbuilder cannot locate the site-commands parcel.  This is basically
a parcel named site-commands that contains various additional commands that can do
things that you can&#8217;t define in the config file.</p>
<p>Creating such a parcel is easy.  Here&#8217;s one that uses the standard
<a class="reference external" href="http://github.com/jasonbaker/envb-site-commands">envb-site-commands</a> repository:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[[</span><span class="n">site</span><span class="o">-</span><span class="n">commands</span><span class="p">]]</span>
<span class="nb">dir</span> <span class="o">=</span> <span class="s">&#39;envb-site-commands&#39;</span>
<span class="n">checkout</span> <span class="o">=</span> <span class="s">&#39;git clone http://github.com/jasonbaker/envb-site-commands.git&#39;</span>
</pre></div>
</div>
<p>Note that you don&#8217;t have to use the envb-site-commands repository.  You can use
any parcel you want!  See the <a class="reference external" href="http://jasonbaker.github.com/envbuilder/0.3/">documentation</a>
on developing envbuilder commands in Python (but note that it is incomplete at the moment).</p>
</div>
<div class="section" id="questions">
<h2><a class="toc-backref" href="#id10">Questions</a><a class="headerlink" href="#questions" title="Permalink to this headline">¶</a></h2>
<p><strong>Can&#8217;t buildout do everything you&#8217;re doing?</strong></p>
<p>Yes, it can (and more).  I&#8217;m of the opinion that that isn&#8217;t necessarily a
good thing.  After all, C++ can do <em>much</em> more than Python.  And yet,
people still use Python because programming in it is much simpler.</p>
<p><strong>What revision control systems do you support?</strong></p>
<p>You can theoretically use any revision control system that has a
command-line interface.  At its most core level, envbuilder is a
framework around the shell (with a focus around building virtualenvs).</p>
<p><strong>Does envbuilder have to be used for Python?</strong></p>
<p>Although envbuilder is written primarily for Python development, it can
work with other languages as well.  There has been some experimentation
in this area.  There&#8217;s a <a class="reference external" href="http://jasonmbaker.com/building-a-common-lisp-webapp-using-pythons-e">blog post</a>
on making envbuilder work with Common Lisp for example.</p>
</div>
<div class="section" id="support">
<h2><a class="toc-backref" href="#id11">Support</a><a class="headerlink" href="#support" title="Permalink to this headline">¶</a></h2>
<p>If you have any issues using envbuilder, feel free to open an issue on the
<a class="reference external" href="http://github.com/jasonbaker/envbuilder/issues">issue tracker</a> or stop
by the <a class="reference external" href="http://groups.google.com/group/envbuilder">support mailing list</a>.</p>
</div>
</div>
<div class="section" id="reference-and-developer-documentation">
<h1><a class="toc-backref" href="#id12">Reference and Developer documentation</a><a class="headerlink" href="#reference-and-developer-documentation" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference external" href="command-line.html">Command-line Reference</a><ul>
<li class="toctree-l2"><a class="reference external" href="command-line.html#global-command-line-options">Global command-line options</a></li>
<li class="toctree-l2"><a class="reference external" href="command-line.html#checkout">Checkout</a><ul>
<li class="toctree-l3"><a class="reference external" href="command-line.html#required-parcel-options">Required Parcel Options</a></li>
<li class="toctree-l3"><a class="reference external" href="command-line.html#extra-dependencies">Extra Dependencies</a></li>
<li class="toctree-l3"><a class="reference external" href="command-line.html#extra-command-line-options">Extra Command-line Options</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference external" href="command-line.html#setup">Setup</a><ul>
<li class="toctree-l3"><a class="reference external" href="command-line.html#id1">Required Parcel Options</a></li>
<li class="toctree-l3"><a class="reference external" href="command-line.html#id2">Extra Dependencies</a></li>
<li class="toctree-l3"><a class="reference external" href="command-line.html#id3">Extra Command-line Options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="command.html">command</a><ul>
<li class="toctree-l2"><a class="reference external" href="command.html#hello-world">Hello world</a></li>
<li class="toctree-l2"><a class="reference external" href="command.html#using-a-shell-command">Using a shell command</a></li>
<li class="toctree-l2"><a class="reference external" href="command.html#running-a-webserver">Running a webserver</a></li>
<li class="toctree-l2"><a class="reference external" href="command.html#dependency-management">Dependency management</a></li>
<li class="toctree-l2"><a class="reference external" href="command.html#command-line-arguments">Command-line arguments</a></li>
<li class="toctree-l2"><a class="reference external" href="command.html#adding-help">Adding help</a></li>
<li class="toctree-l2"><a class="reference external" href="command.html#module-envbuilder.command">Reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="sh.html">sh - shell commands</a></li>
<li class="toctree-l1"><a class="reference external" href="util.html">util</a></li>
<li class="toctree-l1"><a class="reference external" href="config.html">Configuration</a></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1><a class="toc-backref" href="#id13">Indices and tables</a><a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference external" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference external" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference external" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul>
<li class="toctree-l1"><a class="reference external" href="command-line.html">Command-line Reference</a></li>
<li class="toctree-l1"><a class="reference external" href="command.html">command</a></li>
<li class="toctree-l1"><a class="reference external" href="sh.html">sh - shell commands</a></li>
<li class="toctree-l1"><a class="reference external" href="util.html">util</a></li>
<li class="toctree-l1"><a class="reference external" href="config.html">Configuration</a></li>
</ul>

          <h3 style="margin-top: 1.5em;">Search</h3>
          <form class="search" action="search.html" method="get">
            <input type="text" name="q" size="18" />
            <input type="submit" value="Go" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
          <p class="searchtip" style="font-size: 90%">
            Enter search terms or a module, class or function name.
          </p>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <a href="genindex.html" title="General Index"
             >index</a> |
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="command-line.html" title="Command-line Reference"
             >next</a>
            <br/>
            <a href="sources/index.txt"
               rel="nofollow">Show Source</a>
        </div>

        <div class="right">
          
    <div class="footer">
        &copy; Copyright 2010, Jason Baker.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0pre.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>